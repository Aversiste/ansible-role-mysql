image: openbsd/6.8
packages:
  - python-3.8.6p0
  - py3-pip
  - py3-pymysql
  - py3-wheel
  - py3-yamllint
  - rust # Not too pleased with this ...
sources:
  - https://git.sr.ht/~tleguern/ansible-role-mysql
tasks:
  - init: |
      doas ln -sf /usr/local/bin/pip3.8 /usr/local/bin/pip
  - pip: |
      pip install -q ansible
      pip install -q molecule==3.2.4
  - molecule: |
      export PATH="$PATH:~/.local/bin"
      cd ansible-role-mysql
      molecule test -s openbsd
